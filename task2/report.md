# Порівняння точного підрахунку унікальних IP-адрес та HyperLogLog

## Мета роботи

Метою цієї роботи є порівняння точного підрахунку унікальних IP-адрес із наближеним підрахунком за допомогою алгоритму **HyperLogLog**, а також аналіз їхньої продуктивності за часом виконання та придатності до роботи з великими наборами даних.

---

## Опис реалізації

Для обробки даних використано лог-файл `lms-stage-access.log`, що містить записи у форматі JSON. IP-адреси витягуються з поля `remote_addr`. Некоректні або пошкоджені рядки ігноруються.

Було реалізовано два підходи:

- **Точний підрахунок** — з використанням структури даних `set`, яка зберігає всі унікальні IP-адреси.
- **Наближений підрахунок** — з використанням структури **HyperLogLog**, яка не зберігає самі IP-адреси, а використовує фіксовану кількість регістрів для оцінки кількості унікальних елементів.

Для імітації роботи з великими наборами даних лог-файл оброблявся як потік (*stream*) з можливістю багаторазового повторення без завантаження всіх даних у памʼять.

---

## Результати

### Таблиця результатів порівняння

| Кількість оброблених IP-адрес | Унікальні IP (точний) | Унікальні IP (HyperLogLog) | Час виконання — точний (сек.) | Час виконання — HyperLogLog (сек.) |
|-------------------------------|------------------------|-----------------------------|--------------------------------|------------------------------------|
| 29 553                        | 28                     | 28                          | 0.1809                         | 0.2206                             |
| 147 765                       | 28                     | 28                          | 0.9325                         | 1.0508                             |
| 443 295                       | 28                     | 28                          | 2.7080                         | 3.1736                             |
| 1 773 180                     | 28                     | 28                          | 11.1547                        | 12.9607                            |

Експерименти показали, що:

- Обидва методи повертають однакову кількість унікальних IP-адрес для даного набору даних (28).
- Час виконання зростає лінійно зі збільшенням кількості оброблених записів.
- **HyperLogLog** має дещо більший час виконання через додаткові обчислення хешів, проте використовує **постійну кількість памʼяті**, незалежно від обсягу даних.

---

## Висновки

Точний підрахунок є швидким і ефективним для невеликих наборів даних та може виконуватися у потоковому режимі, однак він потребує збереження всіх унікальних елементів у памʼяті, що обмежує його масштабованість.

**HyperLogLog** забезпечує наближену оцінку з прийнятною похибкою та є значно більш придатним для обробки великих потоків даних, де обмеження памʼяті є критичним фактором.

Таким чином, вибір методу залежить від вимог до точності та доступних ресурсів памʼяті.
